<!DOCTYPE html>
<html lang="en">
    <head>
      <title>Mongo Web IDE</title>
      <link rel="stylesheet" href="/public/index.css">
      <link rel="stylesheet" href="/public/lib/nvd3/nv.d3.css">
      <script type="text/javascript">
        var documentProperties = {
          queryId: <%= queryId %>
        };
      </script>
      <script src="/public/lib/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
      <script src="/public/lib/ace-builds/src-noconflict/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>      
      <script src="/public/lib/jquery/dist/jquery.min.js" type="text/javascript"></script>
      <script src="/public/lib/underscore/underscore.js" type="text/javascript"></script>
      <script src="/public/lib/keymaster/keymaster.js" type="text/javascript"></script>
      <script src="/public/lib/LiveScript/browser/livescript.js" type="text/javascript"></script>
      <script src="/public/lib/d3/d3.js" type="text/javascript"></script>
      <script src="/public/lib/nvd3/nv.d3.js" type="text/javascript"></script>
      <script src="/public/lib/prelude-browser-min/index.js" type="text/javascript"></script>
      <script src="/public/index.js" type="text/javascript"></script>
    </head>
    <body>
      <div class="preloader" style="display: none">
        <div>Loading, please wait...</div>
      </div>
      <div class="menu">
        <a class="logo" href="/list?_=<%= new Date().getTime() %>"></a>
        <a class="button" href="/" target="_blank">New</a>
        <a class="button" id="save">Save</a>
        <a class="button" id="execute-query">Execute</a>
        <% if (!!queryId) { %>
          <a class="button" href="/fork/<%= queryId %>" target="_blank">Fork</a>
        <% } %>
        <a class="toggle button" id="cache">Cache</a>
      </div>
      <div class="content">
        <div class="editors">
          <div class="editor-name">
              <input type="text" id="name" placeholder="Enter query name here!" value="<%= name %>"/>
          </div>
          <div class="editor" id="query-editor"><%= query %></div>
          <div class="resize-handle horizontal"></div>
          <div class="editor-name">Transformation</div>
          <div class="editor"id="transformer"><%= transformationCode %></div>
          <div class="resize-handle horizontal"></div>        
          <div class="editor-name">Presentation</div>
          <div class="editor"id="presenter"><%= presentationCode %></div>
          <div class="resize-handle horizontal"></div>        
        </div>
        <div class="resize-handle vertical"></div>
        <div class="output">
          <pre></pre>
          <svg></svg>
        </div>
      </div>
    </body>
</html>